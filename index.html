<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Results</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(180deg, #edf7ff, #d6ecff);
  overflow-x: hidden;
}

h1 {
  text-align: center;
  margin: 20px 0;
  color: #2c5f8a;
}

#resultsBox {
  max-width: 600px;
  margin: 30px auto;
  background: rgba(255,255,255,0.92);
  border-radius: 18px;
  padding: 20px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.12);
  position: relative;
  z-index: 2;
}

.resultRow {
  display: flex;
  justify-content: space-between;
  padding: 10px 0;
  border-bottom: 1px solid #e1f0ff;
  font-size: 18px;
}

.resultRow:last-child {
  border-bottom: none;
}

.empty {
  text-align: center;
  color: #777;
}

/* ---------- CONFETTI ---------- */
.confetti {
  position: fixed;
  bottom: -40px;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  animation: confettiSplash 4s ease-out forwards;
  z-index: 1;
}

@keyframes confettiSplash {
  0% { transform: translateY(0); opacity: 1; }
  35% { transform: translateY(-320px); }
  100% { transform: translateY(600px); opacity: 0; }
}

/* ---------- EMOJI POP ---------- */
#emojiPop {
  position: fixed;
  font-size: 140px;
  opacity: 0;
  transition: all 1.2s ease;
  z-index: 3;
}
</style>
</head>

<body>

<h1>ðŸ“Š Results</h1>

<div id="resultsBox">
  <div id="results" class="empty">Loading resultsâ€¦</div>
</div>

<div id="emojiPop">ðŸ’©</div>

<script>
/* ---------- FIREBASE ---------- */
const firebaseConfig = {
  databaseURL: "YOUR_DATABASE_URL_HERE"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* ---------- LOAD RESULTS ---------- */
const resultsDiv = document.getElementById("results");

db.ref("results").on("value", snap => {
  resultsDiv.innerHTML = "";

  if (!snap.exists()) {
    resultsDiv.innerHTML = "<div class='empty'>No results yet</div>";
    return;
  }

  const data = snap.val();
  Object.keys(data).forEach(key => {
    const row = document.createElement("div");
    row.className = "resultRow";
    row.innerHTML = `<span>${key}</span><span>${data[key]}</span>`;
    resultsDiv.appendChild(row);
  });
});

/* ---------- CONFETTI SPLASH ---------- */
function launchConfetti() {
  for (let i = 0; i < 22; i++) {
    const c = document.createElement("div");
    c.className = "confetti";
    c.style.left = Math.random() * window.innerWidth + "px";
    c.style.background = `hsl(${Math.random()*360}, 70%, 65%)`;
    document.body.appendChild(c);
    setTimeout(() => c.remove(), 4000);
  }
}
setInterval(launchConfetti, 10000);

/* ---------- EMOJI EDGE POP ---------- */
const emoji = document.getElementById("emojiPop");
const sides = ["top","bottom","left","right"];

function popEmoji() {
  const side = sides[Math.floor(Math.random()*sides.length)];
  const pos = Math.random() * 60 + 10;

  emoji.style.opacity = "1";
  emoji.style.transform = "none";

  emoji.style.top = "";
  emoji.style.bottom = "";
  emoji.style.left = "";
  emoji.style.right = "";

  if (side === "top") {
    emoji.style.top = "-140px";
    emoji.style.left = pos + "%";
    emoji.style.transform = "rotate(180deg)";
    setTimeout(()=>emoji.style.top = "-40px",100);
  }
  if (side === "bottom") {
    emoji.style.bottom = "-140px";
    emoji.style.left = pos + "%";
    setTimeout(()=>emoji.style.bottom = "-40px",100);
  }
  if (side === "left") {
    emoji.style.left = "-140px";
    emoji.style.top = pos + "%";
    emoji.style.transform = "rotate(90deg)";
    setTimeout(()=>emoji.style.left = "-40px",100);
  }
  if (side === "right") {
    emoji.style.right = "-140px";
    emoji.style.top = pos + "%";
    emoji.style.transform = "rotate(-90deg)";
    setTimeout(()=>emoji.style.right = "-40px",100);
  }

  setTimeout(() => {
    emoji.style.opacity = "0";
  }, 3000);
}

setInterval(popEmoji, 7000);
</script>

</body>
</html>
