<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Poop Quest â€“ Scores</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body {
  margin: 0;
  font-family: 'Arial', sans-serif;
  background: linear-gradient(180deg, #eaf6ff, #cfe9ff);
  overflow-x: hidden;
}

h1 {
  text-align: center;
  margin-top: 20px;
  color: #2b5d8a;
}

#scoreBoard {
  max-width: 600px;
  margin: 30px auto;
  background: rgba(255,255,255,0.9);
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  position: relative;
  z-index: 2;
}

.scoreRow {
  display: flex;
  justify-content: space-between;
  padding: 10px 0;
  border-bottom: 1px solid #dbefff;
  font-size: 18px;
}

.scoreRow:last-child {
  border-bottom: none;
}

.empty {
  text-align: center;
  color: #888;
}

/* ---------- CONFETTI ---------- */
.confetti {
  position: fixed;
  bottom: -40px;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  opacity: 0.9;
  animation: splash 4s ease-out forwards;
  z-index: 1;
}

@keyframes splash {
  0%   { transform: translateY(0) scale(1); opacity: 1; }
  30%  { transform: translateY(-300px) scale(1.2); }
  100% { transform: translateY(500px) scale(0.6); opacity: 0; }
}

/* ---------- POOP EMOJI ---------- */
#poop {
  position: fixed;
  font-size: 140px;
  transition: transform 1.2s ease, opacity 1.2s ease;
  z-index: 3;
  opacity: 0;
}
</style>
</head>

<body>

<h1>ðŸ’© Poop Quest Scores</h1>

<div id="scoreBoard">
  <div id="scores" class="empty">Loading scoresâ€¦</div>
</div>

<div id="poop">ðŸ’©</div>

<script>
/* ---------- FIREBASE ---------- */
const firebaseConfig = {
  databaseURL: "YOUR_DATABASE_URL_HERE"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* ---------- LOAD SCORES ---------- */
const scoresDiv = document.getElementById("scores");

db.ref("scores").on("value", snap => {
  scoresDiv.innerHTML = "";

  if (!snap.exists()) {
    scoresDiv.innerHTML = "<div class='empty'>No scores yet</div>";
    return;
  }

  const data = snap.val();
  Object.keys(data).forEach(name => {
    const row = document.createElement("div");
    row.className = "scoreRow";
    row.innerHTML = `<span>${name}</span><span>${data[name]}</span>`;
    scoresDiv.appendChild(row);
  });
});

/* ---------- CONFETTI SPLASH ---------- */
function splashConfetti() {
  for (let i = 0; i < 20; i++) {
    const c = document.createElement("div");
    c.className = "confetti";
    c.style.left = Math.random() * window.innerWidth + "px";
    c.style.background = `hsl(${Math.random()*360}, 80%, 65%)`;
    document.body.appendChild(c);
    setTimeout(() => c.remove(), 4000);
  }
}
setInterval(splashConfetti, 10000);

/* ---------- POOP POP ANIMATION ---------- */
const poop = document.getElementById("poop");
const sides = ["top", "bottom", "left", "right"];

function poopPop() {
  const side = sides[Math.floor(Math.random()*sides.length)];
  const rand = Math.random() * 60 + 10;

  poop.style.opacity = "1";
  poop.style.transform = "none";

  if (side === "top") {
    poop.style.top = "-140px";
    poop.style.left = rand + "%";
    poop.style.transform = "rotate(180deg)";
    setTimeout(()=> poop.style.top = "-40px", 100);
  }

  if (side === "bottom") {
    poop.style.bottom = "-140px";
    poop.style.left = rand + "%";
    poop.style.transform = "rotate(0deg)";
    setTimeout(()=> poop.style.bottom = "-40px", 100);
  }

  if (side === "left") {
    poop.style.left = "-140px";
    poop.style.top = rand + "%";
    poop.style.transform = "rotate(90deg)";
    setTimeout(()=> poop.style.left = "-40px", 100);
  }

  if (side === "right") {
    poop.style.right = "-140px";
    poop.style.top = rand + "%";
    poop.style.transform = "rotate(-90deg)";
    setTimeout(()=> poop.style.right = "-40px", 100);
  }

  setTimeout(() => {
    poop.style.opacity = "0";
    poop.style.top = "";
    poop.style.bottom = "";
    poop.style.left = "";
    poop.style.right = "";
  }, 3000);
}

setInterval(poopPop, 7000);
</script>

</body>
</html>
